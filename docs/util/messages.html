<!DOCTYPE html>
<html lang="en">

<head>
    <title>Sporočanje</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link rel="stylesheet" href="./styles/navbar_styles.css">
    <link rel="stylesheet" href="./styles/messages_styles.css">
    <link rel="icon" href="./assets/icons/stbree_icon_tr.png">
</head>

<body>
    <!--Navbar-->
    <nav class="navbar navbar-expand-md navbar-dark bg-custom">
        <a class="navbar-brand mr-auto" href="#top"><img width="104.25px" height="39.125px"
                src="./assets/icons/stbree_logo.png" alt="stbree_logo"></a>

        <button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target=".menu-collapse">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="navbar-collapse collapse w-100 menu-collapse order-0">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item mx-auto">
                    <a class="nav-link text-light" href="./dashboard.html">Pregledna plošča</a>
                </li>
                <li class="nav-item mx-auto">
                    <a class="nav-link text-light" href="./messages.html">Sporočila</a>
                </li>
                <li class="nav-item mx-auto">
                    <a class="nav-link text-light" href="./instrukcije.html">Inštrukcije</a>
                </li>
                <li class="nav-item mx-auto">
                    <a class="nav-link text-light" href="./jobs.html">Delo</a>
                </li>
                <li class="nav-item mx-auto">
                    <a class="nav-link text-light" href="./opravila.html">Moja opravila</a>
                </li>
                <li class="nav-item mx-auto">
                    <button class="nav-link btn mx-auto bg-transparent" id="navbarDropdown" role="button"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" type="button"
                        data-toggle="collapse">
                        <img height="30px" width="30px" src="./assets/icons/user.png" alt="user_icon" id="user_icon">
                    </button>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="./profile.html">Profil</a>
                        <a class="dropdown-item" href="./settings.html">Nastavitve</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item text-danger" href="./index.html">Odjava</a>
                    </div>
                </li>
            </ul>
        </div>
    </nav>

    <!--Contacts-->
    <div class="col-md-2 contacts-web" id="contactbox">
        <ul class="contact-list list-unstyled " id="contact-list">
            <li class="list-item">
                <a href="#"><img src="./assets/profiles/message_thumbnail_L.png" alt=""></a>
                <h6 class="podatki">Linda</h6>
            </li>
            <li class="list-item">
                <a href="#"><img src="./assets/profiles/message_thumbnail_P.png" alt=""></a>
                <h6 class="podatki">Pedro Pinatas</h6>
            </li>
            <li class="list-item">
                <a href="#"><img src="./assets/profiles/message_thumbnail_T.png" alt=""></a>
                <h6 class="podatki">Tepig Firepig</h6>
            </li>
            <li id="add-friend" class="">
                dodaj prijatelja
            </li>
        </ul>
    </div>

    <!--Chat-->
    <div class="chatbox col-md-8 offset-md-2">
        <div id="message-box" class="message-box-mobile">
            <ul id="messages" class="list-unstyled"></ul>
        </div>

        <div id="type">
            <input id="textbox" type="text" name="message" placeholder="Vnesite sporočilo">
            <button id="send-button" class="btn btn-info">
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-right-circle" fill="currentColor"
                    xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                        d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                    <path fill-rule="evenodd"
                        d="M4 8a.5.5 0 0 0 .5.5h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5A.5.5 0 0 0 4 8z" />
                </svg>
            </button>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
        integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
        crossorigin="anonymous"></script>
    <script>
        let textbox = document.getElementById("textbox");
        let messages = document.getElementById("messages");
        let send_button = document.getElementById("send-button");
        let scroll = document.getElementById("messages");
        let contactbox = document.getElementById("contactbox");
        const podatki = document.getElementsByClassName("podatki");
        let contact_list = document.getElementById("contact-list");
        let list_items = document.getElementsByClassName("list-item");
        let message_box = document.getElementById("meeesage-box");
        let lonely_counter = 0;
        let add_friend = document.getElementById("add-friend");

        send_button.addEventListener("click", function () {
            if (textbox.value != "") { //še za presledke potrebno
                let newMessage = document.createElement("li");
                newMessage.classList.add("message");
                newMessage.innerHTML = textbox.value;
                messages.appendChild(newMessage);
                add_response(lonely_counter);
                lonely_counter++;
                textbox.value = "";
                scroll.scrollTop = scroll.scrollHeight;
            }
        });

        function add_response(cond) {
            if (cond == 2) {
                lonely_counter = -1;
                let newResponse = document.createElement("li");
                newResponse.classList.add("responses");
                newResponse.innerHTML = "Zakaj govoriš sam s sabo?";
                messages.appendChild(newResponse);
            }
        }

        window.onload = function () { resize() }

        window.addEventListener("resize", function () { resize() });

        add_friend.addEventListener("click", function () { add_f() });

        function add_f() {
            let newFriend = document.createElement("li");
            newFriend.classList.add("list-item");
            newFriend.innerHTML = "Nikogar ne boš našel/a :("
            contact_list.insertBefore(newFriend, add_friend);
        }

        function resize() {
            if (window.innerWidth < 767) {
                contactbox.classList.remove("contacts-web");
                contactbox.classList.add("contacts-mobile");
                for (var i = 0; i < podatki.length; i++) {
                    podatki[i].classList.add("hide");
                }
                contact_list.classList.add("contact-list-mobile");
                for (var i = 0; i < list_items.length; i++) {
                    list_items[i].classList.add("list-item-mobile");
                }
            }
            else {
                contactbox.classList.remove("contacts-mobile");
                contactbox.classList.add("contacts-web");
                for (var i = 0; i < podatki.length; i++) {
                    podatki[i].classList.remove("hide");
                }
                contact_list.classList.remove("contact-list-mobile");
                for (var i = 0; i < list_items.length; i++) {
                    list_items[i].classList.remove("list-item-mobile");
                }
            }
        }

    </script>
</body>

</html>